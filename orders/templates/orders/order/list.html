<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Мои заказы</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <h1 class="mb-4">Мои заказы</h1>
    
    {% if orders %}
        {% for order in orders %}
        <div class="card mb-3">
            <div class="card-header">
                <h5 class="mb-0">Заказ №{{ order.id }} от {{ order.created|date:"d.m.Y H:i" }}</h5>
            </div>
            <div class="card-body">
                <p><strong>Статус:</strong> {% if order.paid %}Оплачен{% else %}Ожидает оплаты{% endif %}</p>
                <p><strong>Сумма:</strong> {{ order.get_total_cost }} ₽</p>
                <p><strong>Адрес доставки:</strong> {{ order.address }}, {{ order.city }}</p>
                
                <h6>Товары:</h6>
                <ul>
                    {% for item in order.items.all %}
                    <li>{{ item.product.name }} x {{ item.quantity }} = {{ item.get_cost }} ₽</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <div class="alert alert-info">
            {% if user.is_authenticated %}
                У вас ещё нет заказов.
            {% else %}
                Войдите в систему, чтобы увидеть свои заказы.
            {% endif %}
        </div>
    {% endif %}
    
    <a href="/" class="btn btn-primary">Вернуться в магазин</a>
</div>
</body>
</html>